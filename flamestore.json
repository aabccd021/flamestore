{
  "$schema": "./flamestore-schema/v2.json",
  "region": "asia-southeast2",
  "project": {
    "flamestore": {
      "dynamicLinkDomain": "flamestore.page.link",
      "androidPackageName": "com.example.flamestore_example"
    }
  },
  "authentication": {
    "userCollection": "users",
    "uidField": "uid"
  },
  "collections": {
    "users": {
      "rule:get": "all",
      "rule:list": "authenticated",
      "rule:create": "owner",
      "rule:update": "owner",
      "fields": {
        "userName": {
          "isUnique": true,
          "string": {
            "minLength": 1,
            "maxLength": 15
          }
        },
        "bio": {
          "isOptional": true,
          "string": {
            "minLength": 1,
            "maxLength": 160
          }
        },
        "tweetsCount": {
          "count": {
            "collection": "tweets",
            "reference": "user"
          }
        }
      }
    },
    "tweets": {
      "rule:get": "all",
      "rule:list": "all",
      "rule:create": "owner",
      "rule:update": "owner",
      "rule:delete": "owner",
      "ownerField": "user",
      "fields": {
        "user": {
          "path": {
            "collection": "users",
            "syncFields": [
              "userName"
            ]
          }
        },
        "tweetText": {
          "string": {
            "minLength": 1,
            "maxLength": 280
          }
        },
        "likesSum": {
          "sum": {
            "collection": "likes",
            "field": "likeValue",
            "reference": "tweet"
          }
        },
        "creationTime": "serverTimestamp",
        "hotness": {
          "isComputed": true,
          "float": {}
        },
        "dynamicLink": {
          "dynamicLink": {
            "isSuffixShort": true,
            "title": {
              "field": "tweetText"
            },
            "description": "tweet description"
          }
        }
      }
    },
    "likes": {
      "rule:get": "owner",
      "rule:create": "owner",
      "rule:update": "owner",
      "rule:delete": "owner",
      "keyFields": [
        "user",
        "tweet"
      ],
      "ownerField": "user",
      "fields": {
        "likeValue": {
          "int": {
            "max": 5,
            "min": 0,
            "deleteDocWhen": 0
          }
        },
        "tweet": {
          "path": {
            "collection": "tweets"
          }
        }
      }
    }
  }
}