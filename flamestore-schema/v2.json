{
  "$ref": "#/definitions/FlamestoreSchema",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "Collection": {
      "additionalProperties": false,
      "properties": {
        "fields": {
          "additionalProperties": {
            "$ref": "#/definitions/Field"
          },
          "type": "object"
        },
        "keyFields": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "ownerField": {
          "type": "string"
        },
        "rule:create": {
          "$ref": "#/definitions/Rule"
        },
        "rule:delete": {
          "$ref": "#/definitions/Rule"
        },
        "rule:get": {
          "$ref": "#/definitions/Rule"
        },
        "rule:list": {
          "$ref": "#/definitions/Rule"
        },
        "rule:update": {
          "$ref": "#/definitions/Rule"
        }
      },
      "required": [
        "fields"
      ],
      "type": "object"
    },
    "DynamicLinkAttribute": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/DynamicLinkAttributeFromField"
        }
      ]
    },
    "DynamicLinkAttributeFromField": {
      "additionalProperties": false,
      "properties": {
        "field": {
          "type": "string"
        }
      },
      "required": [
        "field"
      ],
      "type": "object"
    },
    "Field": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "isComputed": {
              "type": "boolean"
            },
            "string": {
              "additionalProperties": false,
              "properties": {
                "maxLength": {
                  "type": "number"
                },
                "minLength": {
                  "type": "number"
                }
              },
              "type": "object"
            }
          },
          "required": [
            "string"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            },
            "string": {
              "additionalProperties": false,
              "properties": {
                "maxLength": {
                  "type": "number"
                },
                "minLength": {
                  "type": "number"
                }
              },
              "type": "object"
            }
          },
          "required": [
            "string"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "float": {
              "additionalProperties": false,
              "properties": {
                "deleteDocWhen": {
                  "type": "number"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "isComputed": {
              "type": "boolean"
            }
          },
          "required": [
            "float"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "float": {
              "additionalProperties": false,
              "properties": {
                "deleteDocWhen": {
                  "type": "number"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            }
          },
          "required": [
            "float"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isComputed": {
              "type": "boolean"
            },
            "path": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "syncFields": {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              },
              "required": [
                "collection"
              ],
              "type": "object"
            }
          },
          "required": [
            "path"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            },
            "path": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "syncFields": {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              },
              "required": [
                "collection"
              ],
              "type": "object"
            }
          },
          "required": [
            "path"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "int": {
              "additionalProperties": false,
              "properties": {
                "deleteDocWhen": {
                  "type": "number"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "isComputed": {
              "type": "boolean"
            }
          },
          "required": [
            "int"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "int": {
              "additionalProperties": false,
              "properties": {
                "deleteDocWhen": {
                  "type": "number"
                },
                "max": {
                  "type": "number"
                },
                "min": {
                  "type": "number"
                }
              },
              "type": "object"
            },
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            }
          },
          "required": [
            "int"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isComputed": {
              "type": "boolean"
            },
            "timestamp": {
              "additionalProperties": false,
              "type": "object"
            }
          },
          "required": [
            "timestamp"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            },
            "timestamp": {
              "additionalProperties": false,
              "type": "object"
            }
          },
          "required": [
            "timestamp"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isComputed": {
              "type": "boolean"
            },
            "sum": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "field": {
                  "type": "string"
                },
                "reference": {
                  "type": "string"
                }
              },
              "required": [
                "collection",
                "field",
                "reference"
              ],
              "type": "object"
            }
          },
          "required": [
            "sum"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            },
            "sum": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "field": {
                  "type": "string"
                },
                "reference": {
                  "type": "string"
                }
              },
              "required": [
                "collection",
                "field",
                "reference"
              ],
              "type": "object"
            }
          },
          "required": [
            "sum"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "count": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "reference": {
                  "type": "string"
                }
              },
              "required": [
                "collection",
                "reference"
              ],
              "type": "object"
            },
            "isComputed": {
              "type": "boolean"
            }
          },
          "required": [
            "count"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "count": {
              "additionalProperties": false,
              "properties": {
                "collection": {
                  "type": "string"
                },
                "reference": {
                  "type": "string"
                }
              },
              "required": [
                "collection",
                "reference"
              ],
              "type": "object"
            },
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            }
          },
          "required": [
            "count"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "dynamicLink": {
              "additionalProperties": false,
              "properties": {
                "description": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                },
                "imageURL": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                },
                "isSuffixShort": {
                  "type": "boolean"
                },
                "title": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                }
              },
              "type": "object"
            },
            "isComputed": {
              "type": "boolean"
            }
          },
          "required": [
            "dynamicLink"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "dynamicLink": {
              "additionalProperties": false,
              "properties": {
                "description": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                },
                "imageURL": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                },
                "isSuffixShort": {
                  "type": "boolean"
                },
                "title": {
                  "$ref": "#/definitions/DynamicLinkAttribute"
                }
              },
              "type": "object"
            },
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            }
          },
          "required": [
            "dynamicLink"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isComputed": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "isCreatable": {
              "type": "boolean"
            },
            "isOptional": {
              "type": "boolean"
            },
            "isUnique": {
              "type": "boolean"
            },
            "isUpdatable": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        {
          "const": "serverTimestamp",
          "type": "string"
        }
      ]
    },
    "FlamestoreSchema": {
      "additionalProperties": false,
      "properties": {
        "$schema": {
          "type": "string"
        },
        "authentication": {
          "additionalProperties": false,
          "properties": {
            "uidField": {
              "type": "string"
            },
            "userCollection": {
              "type": "string"
            }
          },
          "required": [
            "userCollection",
            "uidField"
          ],
          "type": "object"
        },
        "collections": {
          "additionalProperties": {
            "$ref": "#/definitions/Collection"
          },
          "type": "object"
        },
        "project": {
          "additionalProperties": {
            "$ref": "#/definitions/ProjectConfiguration"
          },
          "type": "object"
        },
        "region": {
          "type": "string"
        },
        "ruleOutputPath": {
          "type": "string"
        },
        "triggerOutputPath": {
          "type": "string"
        }
      },
      "required": [
        "$schema",
        "collections",
        "region",
        "project"
      ],
      "type": "object"
    },
    "ProjectConfiguration": {
      "additionalProperties": false,
      "properties": {
        "androidPackageName": {
          "type": "string"
        },
        "domain": {
          "type": "string"
        },
        "dynamicLinkDomain": {
          "type": "string"
        }
      },
      "required": [
        "androidPackageName"
      ],
      "type": "object"
    },
    "Rule": {
      "enum": [
        "all",
        "owner",
        "authenticated",
        "none"
      ],
      "type": "string"
    }
  }
}